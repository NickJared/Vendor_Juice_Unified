on early-init

    write /sys/block/sda/queue/read_ahead_kb 128
    write /sys/block/sda/queue/scheduler "noop"

    write /sys/block/zram0/comp_algorithm "lzo"


on init

    write /proc/sys/vm/page-cluster 0


on boot

    # Update cpuset now that processors are Up :
    write /dev/cpuset/background/cpus 0-1

    write /dev/cpuset/foreground/cpus 0-3,6

    write /dev/cpuset/system-background/cpus 0-2

    write /dev/cpuset/top-app/cpus 0-7

	# CPUs Frequency :
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq 1804800
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq 300000

    write /sys/devices/system/cpu/cpu6/cpufreq/scaling_max_freq 2304000
    write /sys/devices/system/cpu/cpu6/cpufreq/scaling_min_freq 300000


on property:dev.bootcomplete=1

    # I/O :
    write /sys/block/sda/queue/nr_requests 1024
    write /sys/block/sda/queue/read_ahead_kb 1024
    write /sys/block/sda/queue/scheduler "cfq"

    # SWAP :
    write /sys/block/zram0/disksize 0

    # GPU :
    write /sys/class/kgsl/kgsl-3d0/devfreq/governor "msm-adreno-tz"
    write /sys/class/kgsl/kgsl-3d0/devfreq/min_freq 180000000

    write /sys/class/kgsl/kgsl-3d0/max_clock_mhz 800
    write /sys/class/kgsl/kgsl-3d0/max_gpuclk 800000000

    # 0:Highest Clock, 6:Lowest (Battery Friendly)
    write /sys/class/kgsl/kgsl-3d0/min_pwrlevel 6

    # Disable frequency scaling throttling of the Adreno GPU circuits
    write /sys/class/kgsl/kgsl-3d0/throttling 0


    #
    # CPUs :
    #

    # Cluster 0
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor "schedutil"

    write /sys/devices/system/cpu/cpu0/online 1
    write /sys/devices/system/cpu/cpu1/online 1
    write /sys/devices/system/cpu/cpu2/online 1
    write /sys/devices/system/cpu/cpu3/online 1
    write /sys/devices/system/cpu/cpu4/online 1
    write /sys/devices/system/cpu/cpu5/online 1

    write /sys/devices/system/cpu/cpu0/sched_load_boost -6
    write /sys/devices/system/cpu/cpu1/sched_load_boost -6
    write /sys/devices/system/cpu/cpu2/sched_load_boost -6
    write /sys/devices/system/cpu/cpu3/sched_load_boost -6
    write /sys/devices/system/cpu/cpu4/sched_load_boost -6
    write /sys/devices/system/cpu/cpu5/sched_load_boost -6

    # Cluster 1
    write /sys/devices/system/cpu/cpu6/cpufreq/scaling_governor "schedutil"

    write /sys/devices/system/cpu/cpu6/online 1
    write /sys/devices/system/cpu/cpu7/online 1

    write /sys/devices/system/cpu/cpu6/sched_load_boost -6
    write /sys/devices/system/cpu/cpu7/sched_load_boost -6


    #
    # Schedutil Governor :
    #

    # Cluster 0
    write /sys/devices/system/cpu/cpu0/cpufreq/schedutil/down_rate_limit_us 0
    write /sys/devices/system/cpu/cpu0/cpufreq/schedutil/hispeed_freq 1612800
    write /sys/devices/system/cpu/cpu0/cpufreq/schedutil/hispeed_load 85
    write /sys/devices/system/cpu/cpu0/cpufreq/schedutil/pl 0
    write /sys/devices/system/cpu/cpu0/cpufreq/schedutil/up_rate_limit_us 0

    write /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres "45 45 45 45 45 45"
    write /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres "65 65 65 65 65 65"
    write /sys/devices/system/cpu/cpu0/core_ctl/enable 1
    write /sys/devices/system/cpu/cpu0/core_ctl/not_preferred "0 0 0 0 1 1"
    write /sys/devices/system/cpu/cpu0/core_ctl/task_thres 8

    # Cluster 1
    write /sys/devices/system/cpu/cpu6/cpufreq/schedutil/down_rate_limit_us 0
    write /sys/devices/system/cpu/cpu6/cpufreq/schedutil/hispeed_freq 2169600
    write /sys/devices/system/cpu/cpu6/cpufreq/schedutil/hispeed_load 85
    write /sys/devices/system/cpu/cpu6/cpufreq/schedutil/pl 0
    write /sys/devices/system/cpu/cpu6/cpufreq/schedutil/up_rate_limit_us 0

    write /sys/devices/system/cpu/cpu6/core_ctl/busy_down_thres "45 45 45 45 45 45"
    write /sys/devices/system/cpu/cpu6/core_ctl/busy_up_thres "65 65 65 65 65 65"
    write /sys/devices/system/cpu/cpu6/core_ctl/enable 1
    write /sys/devices/system/cpu/cpu6/core_ctl/not_preferred "0 1"
    write /sys/devices/system/cpu/cpu6/core_ctl/task_thres 4

    # Storage Speed Fix :
    write /sys/devices/virtual/bdi/179:0/read_ahead_kb 1024
    write /sys/devices/virtual/bdi/253:0/read_ahead_kb 1024
    write /sys/devices/virtual/bdi/253:1/read_ahead_kb 1024
    write /sys/devices/virtual/bdi/253:2/read_ahead_kb 1024
    write /sys/devices/virtual/bdi/254:0/read_ahead_kb 1024

    # Enable CPU Boost
	# [/proc/sys/kernel/sched_boost will be disabled ... and it is good here]
    write /sys/module/cpu_boost/parameters/input_boost_freq "0:300000 1:300000 2:300000 3:300000 4:300000 5:300000 6:300000 7:300000"
    write /sys/module/cpu_boost/parameters/input_boost_ms 0
    write /sys/module/cpu_boost/parameters/powerkey_input_boost_freq "0:300000 1:300000 2:300000 3:300000 4:300000 5:300000 6:300000 7:300000"
    write /sys/module/cpu_boost/parameters/powerkey_input_boost_ms 0
    write /sys/module/cpu_boost/parameters/sched_boost_on_input 1
    write /sys/module/cpu_boost/parameters/sched_boost_on_powerkey_input "Y"

    # Enable the "built-in" display panel power saving :
    write /sys/kernel/debug/dsi_panel_ft8719_truly_fhd_vid-display/dsi-phy-0_allow_phy_power_off "Y"
    write /sys/kernel/debug/dsi_panel_ft8719_truly_fhd_vid-display/ulps_feature_enable "Y"
    write /sys/kernel/debug/dsi_panel_ft8719_truly_fhd_vid_display/ulps_suspend_feature_enable "Y"

    write /sys/kernel/debug/dsi_panel_nt36672a_tianma_fhd_video_display/dsi-phy-0_allow_phy_power_off "Y"
    write /sys/kernel/debug/dsi_panel_nt36672a_tianma_fhd_video_display/ulps_feature_enable "Y"
    write /sys/kernel/debug/dsi_panel_nt36672a_tianma_fhd_video_display/ulps_suspend_feature_enable "Y"

    # Disable debug :
    write /sys/kernel/debug/debug_enabled "N"
    write /sys/module/binder/parameters/debug_mask 0
    write /sys/module/kernel/parameters/initcall_debug "N"

    # Use RCU "Expedited" instead of RCU "Normal" for improved : 
	# real-time latency & performance
    write /sys/kernel/rcu_expedited 1
    write /sys/kernel/rcu_normal 0

    # Additional Power Savings :
    write /sys/power/mem_sleep "deep"


on charger

	# CPUs Frequency :
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq 300000
    write /sys/devices/system/cpu/cpu6/cpufreq/scaling_max_freq 300000

    # Cluster 0 :
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor "schedutil"

    write /sys/devices/system/cpu/cpu0/online 1
    write /sys/devices/system/cpu/cpu1/online 1
    write /sys/devices/system/cpu/cpu2/online 0
    write /sys/devices/system/cpu/cpu3/online 0
    write /sys/devices/system/cpu/cpu4/online 0
    write /sys/devices/system/cpu/cpu5/online 0

    # Cluster 1 :
    write /sys/devices/system/cpu/cpu6/cpufreq/scaling_governor "schedutil"

    write /sys/devices/system/cpu/cpu6/online 0
    write /sys/devices/system/cpu/cpu7/online 0
